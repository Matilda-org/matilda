<% if @session_user.policy?('users_edit') || @session_user.policy?('users_edit_policies') || @session_user.policy?('users_edit_password') || @session_user.policy?('users_destroy') %>

<div class="d-flex justify-content-center align-items-center">
  <span
    class="badge bg-<%= @user.daily_tasks_tracks_time_spent.positive? ? 'primary' : 'secondary' %> me-2 px-3 py-2"
    data-controller="tooltip"
    data-tooltip="Tempo tracciato oggi"
  >
    <i class="bi bi-hourglass-split"></i> <%= track_time(@user.daily_tasks_tracks_time_spent) %>
  </span>

  <div class="dropdown">
    <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-three-dots"></i>
    </button>
    <ul class="dropdown-menu">
      <li data-user-policies-target="item" data-policy="users_edit">
        <a class="dropdown-item" href="<%= users_actions_path(type: 'edit', id: @user.id) %>" data-turbo-frame="action">
          Modifica profilo
        </a>
      </li>
      
      <li data-user-policies-target="item" data-policy="users_edit_policies">
        <a class="dropdown-item" href="<%= users_actions_path(type: 'edit-policies', id: @user.id) %>" data-turbo-frame="action">
          Modifica permessi
        </a>
      </li>
      
      <li data-user-policies-target="item" data-policy="users_edit_password">
        <a class="dropdown-item" href="<%= users_actions_path(type: 'regenerate-password', id: @user.id) %>" data-turbo-frame="action">
          Rigenera password
        </a>
      </li>
      
      <li data-user-policies-target="item" data-policy="users_destroy">
        <a class="dropdown-item text-danger" href="<%= users_actions_path(type: 'destroy', id: @user.id) %>" data-turbo-frame="action">
          Elimina utente
        </a>
      </li>
    </ul>
  </div>
</div>

<% end %>
